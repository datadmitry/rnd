<!-- npm install -g vercel -->
<!-- vercel -->
<!-- vercel --prod -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–¶–∏—Ñ—Ä–æ–≤–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üöÄ</text></svg>">
    <style>
        .sim-area {
            display: none;
            background: #e8f4ff;
            padding: 1.25rem;
            border-radius: 8px;
            margin-top: 1rem;
        }
        .course-card {
            transition: transform 0.2s;
        }
        .course-card:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-dark bg-primary">
        <div class="container">
            <span class="navbar-brand">–¶–∏—Ñ—Ä–æ–≤–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å</span>
            <span id="userInfo" style="display:none">
                <span id="currentUser" class="me-2"></span>
                <button class="btn btn-outline-light btn-sm" onclick="logout()">–í—ã–π—Ç–∏</button>
            </span>
        </div>
    </nav>
    
    <div class="container my-4">
        <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
        <div id="loginView">
            <div class="card mx-auto shadow" style="max-width: 400px;">
                <div class="card-body">
                    <h3 class="card-title text-center mb-4">–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h3>
                    <div class="mb-3">
                        <input id="username" class="form-control form-control-lg" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required>
                    </div>
                    <div class="mb-3">
                        <input id="password" type="password" class="form-control form-control-lg" placeholder="–ü–∞—Ä–æ–ª—å" required>
                    </div>
                    <button class="btn btn-primary btn-lg w-100 mb-2" onclick="login()">–í–æ–π—Ç–∏</button>
                    <button class="btn btn-outline-primary btn-lg w-100" onclick="register()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                </div>
            </div>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å -->
        <div id="mainView" style="display:none">
            <!-- –ë–ª–æ–∫ —Å –∫—É—Ä—Å–∞–º–∏ -->
            <div class="card shadow mb-4">
                <div class="card-body">
                    <h3 class="card-title mb-3">–ö—É—Ä—Å—ã –æ–±—É—á–µ–Ω–∏—è</h3>
                    <p class="text-muted mb-4">–í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—Å –¥–ª—è –Ω–∞—á–∞–ª–∞ –æ–±—É—á–µ–Ω–∏—è</p>
                    <div class="row g-4" id="coursesContainer"></div>
                </div>
            </div>
            
            <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å -->
            <div class="card shadow">
                <div class="card-body">
                    <h4 class="card-title mb-3">–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å</h4>
                    <div id="progressContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –°–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤
        const courses = [
            { id: 'phone', name: '–û—Å–Ω–æ–≤—ã —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞', description: '–ù–∞—É—á–∏—Ç–µ—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞' },
            { id: 'max', name: '–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä MAX', description: '–û—Å–≤–æ–π—Ç–µ –æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä' },
            { id: 'shop', name: '–û–Ω–ª–∞–π–Ω-–ø–æ–∫—É–ø–∫–∏', description: '–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞—Ö' },
            { id: 'gos', name: '–ì–æ—Å—É—Å–ª—É–≥–∏', description: '–†–∞–±–æ—Ç–∞ —Å –ø–æ—Ä—Ç–∞–ª–æ–º –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—Å–ª—É–≥' }
        ];

        // –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
        let currentUser = '';

        // –ö–æ–≥–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å
        window.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                loginUser(savedUser);
            }
            
            // –î–µ–ª–∞–µ–º —á—Ç–æ–±—ã –ø–æ Enter —Ç–æ–∂–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –≤–æ–π—Ç–∏
            document.getElementById('username').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') login();
            });
            document.getElementById('password').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') login();
            });
            
            // –ï—Å–ª–∏ –Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ localStorage, —Å–æ–∑–¥–∞–µ–º –¥–µ–º–æ
            if (!localStorage.getItem('users')) {
                localStorage.setItem('users', JSON.stringify([
                    { username: 'demo', password: 'demo' },
                    { username: 'user', password: '123' }
                ]));
                localStorage.setItem('progress', JSON.stringify({
                    demo: { completed: ['phone'] },
                    user: { completed: [] }
                }));
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –≤—Ö–æ–¥–∞
        function login() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –ø–æ–ª—è –Ω–µ –ø—É—Å—Ç—ã–µ
            if (!username || !password) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                return;
            }
            
            // –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                loginUser(username);
                alert('–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
            } else {
                alert('–ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
        function register() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            
            if (!username || !password) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                return;
            }
            
            // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –ª–æ–≥–∏–Ω–∞
            if (username.length < 3) {
                alert('–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 3 —Å–∏–º–≤–æ–ª–æ–≤');
                return;
            }
            
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if (users.some(u => u.username === username)) {
                alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
                return;
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            users.push({ username, password });
            localStorage.setItem('users', JSON.stringify(users));
            
            // –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            const progress = JSON.parse(localStorage.getItem('progress') || '{}');
            progress[username] = { completed: [] };
            localStorage.setItem('progress', JSON.stringify(progress));
            
            alert('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ! –¢–µ–ø–µ—Ä—å –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É.');
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }

        // –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function loginUser(username) {
            currentUser = username;
            localStorage.setItem('currentUser', username);
            
            // –ú–µ–Ω—è–µ–º —ç–∫—Ä–∞–Ω—ã
            document.getElementById('loginView').style.display = 'none';
            document.getElementById('mainView').style.display = 'block';
            document.getElementById('userInfo').style.display = 'block';
            document.getElementById('currentUser').textContent = username;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫—É—Ä—Å—ã –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å
            renderCourses();
            updateProgress();
        }

        // –í—ã—Ö–æ–¥
        function logout() {
            currentUser = '';
            localStorage.removeItem('currentUser');
            
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞ —ç–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞
            document.getElementById('loginView').style.display = 'block';
            document.getElementById('mainView').style.display = 'none';
            document.getElementById('userInfo').style.display = 'none';
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }

        // –†–µ–Ω–¥–µ—Ä–∏–º –∫–∞—Ä—Ç–æ—á–∫–∏ –∫—É—Ä—Å–æ–≤
        function renderCourses() {
            const container = document.getElementById('coursesContainer');
            const progress = JSON.parse(localStorage.getItem('progress') || '{}');
            const userProgress = progress[currentUser] || { completed: [] };
            const completedCourses = userProgress.completed || [];
            
            // –°–æ–∑–¥–∞–µ–º HTML –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫—É—Ä—Å–∞
            container.innerHTML = courses.map(course => {
                const isCompleted = completedCourses.includes(course.id);
                
                return `
                <div class="col-md-6 col-lg-3">
                    <div class="card course-card h-100">
                        <div class="card-body">
                            <h5 class="card-title">${course.name}</h5>
                            <p class="card-text text-muted small">${course.description}</p>
                            
                            ${isCompleted 
                                ? '<span class="badge bg-success">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</span>' 
                                : `<button class="btn btn-primary btn-sm" onclick="startCourse('${course.id}')">–ù–∞—á–∞—Ç—å –∫—É—Ä—Å</button>`
                            }
                            
                            <div id="${course.id}-sim" class="sim-area">
                                <p class="small mb-2"><strong>–°–∏–º—É–ª—è—Ü–∏—è:</strong> ${course.name}</p>
                                <div class="d-flex gap-2 mb-3">
                                    <button class="btn btn-secondary btn-sm" onclick="simulateAction('${course.id}')">–î–µ–π—Å—Ç–≤–∏–µ 1</button>
                                    <button class="btn btn-secondary btn-sm" onclick="simulateAction('${course.id}')">–î–µ–π—Å—Ç–≤–∏–µ 2</button>
                                    <button class="btn btn-secondary btn-sm" onclick="simulateAction('${course.id}')">–î–µ–π—Å—Ç–≤–∏–µ 3</button>
                                </div>
                                <div>
                                    <button class="btn btn-success btn-sm" onclick="completeCourse('${course.id}')">–ó–∞–≤–µ—Ä—à–∏—Ç—å –∫—É—Ä—Å</button>
                                    <button class="btn btn-outline-secondary btn-sm ms-2" onclick="hideSimulation('${course.id}')">–°–∫—Ä—ã—Ç—å</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>`;
            }).join('');
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∏–º—É–ª—è—Ü–∏—é –¥–ª—è –∫—É—Ä—Å–∞
        function startCourse(courseId) {
            // –°–Ω–∞—á–∞–ª–∞ —Å–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–∏–º—É–ª—è—Ü–∏–∏
            courses.forEach(course => {
                const simElement = document.getElementById(`${course.id}-sim`);
                if (simElement) simElement.style.display = 'none';
            });
            
            // –ü–æ—Ç–æ–º –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é
            const simElement = document.getElementById(`${courseId}-sim`);
            if (simElement) {
                simElement.style.display = 'block';
                simElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        // –°–∫—Ä—ã–≤–∞–µ–º —Å–∏–º—É–ª—è—Ü–∏—é
        function hideSimulation(courseId) {
            const simElement = document.getElementById(`${courseId}-sim`);
            if (simElement) simElement.style.display = 'none';
        }

        // –°–∏–º—É–ª—è—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏—è
        function simulateAction(courseId) {
            const course = courses.find(c => c.id === courseId);
            alert(`–î–µ–π—Å—Ç–≤–∏–µ –≤ –∫—É—Ä—Å–µ "${course?.name}" –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!`);
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫—É—Ä—Å–∞
        function completeCourse(courseId) {
            const progress = JSON.parse(localStorage.getItem('progress') || '{}');
            
            // –ï—Å–ª–∏ –Ω–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–æ–∑–¥–∞–µ–º
            if (!progress[currentUser]) {
                progress[currentUser] = { completed: [] };
            }
            
            // –ï—Å–ª–∏ –Ω–µ—Ç –º–∞—Å—Å–∏–≤–∞ completed, —Å–æ–∑–¥–∞–µ–º
            if (!progress[currentUser].completed) {
                progress[currentUser].completed = [];
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫—É—Ä—Å –≤ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç
            if (!progress[currentUser].completed.includes(courseId)) {
                progress[currentUser].completed.push(courseId);
                localStorage.setItem('progress', JSON.stringify(progress));
                
                const course = courses.find(c => c.id === courseId);
                alert(`–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –ö—É—Ä—Å "${course?.name}" —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω!`);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                renderCourses();
                updateProgress();
                hideSimulation(courseId);
            }
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        function updateProgress() {
            const container = document.getElementById('progressContainer');
            const progress = JSON.parse(localStorage.getItem('progress') || '{}');
            const userProgress = progress[currentUser] || { completed: [] };
            const completedCourses = userProgress.completed || [];
            
            // –°—á–∏—Ç–∞–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç—ã
            const completedCount = completedCourses.length;
            const totalCount = courses.length;
            const percentage = totalCount > 0 ? Math.round((completedCount / totalCount) * 100) : 0;
            
            // –§–æ—Ä–º–∏—Ä—É–µ–º HTML
            container.innerHTML = `
                <div class="mb-4">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span class="fw-medium">–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:</span>
                        <span class="fw-bold text-primary">${completedCount}/${totalCount} (${percentage}%)</span>
                    </div>
                    <div class="progress" style="height: 12px;">
                        <div class="progress-bar bg-primary" role="progressbar" style="width: ${percentage}%"></div>
                    </div>
                </div>
                
                <div class="row">
                    ${courses.map(course => {
                        const isCompleted = completedCourses.includes(course.id);
                        return `
                        <div class="col-6 mb-2">
                            <div class="d-flex align-items-center">
                                <span class="me-2">${isCompleted ? '‚úÖ' : '‚≠ï'}</span>
                                <span class="${isCompleted ? 'text-success fw-medium' : 'text-muted'}">
                                    ${course.name}
                                </span>
                            </div>
                        </div>`;
                    }).join('')}
                </div>
            `;
        }
    </script>
</body>
</html>